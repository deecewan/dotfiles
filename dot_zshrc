eval $(/opt/homebrew/bin/brew shellenv)

autoload -U promptinit; promptinit
prompt pure

for f in ~/.config/zsh/*; do
  source "$f"
done

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

export IOS_VERSION=14.5
export EDITOR=nvim

export FASTLANE_SKIP_UPDATE_CHECK=1
export FASTLANE_HIDE_PLUGINS_TABLE=1
export FASTLANE_HIDE_CHANGELOG=1

alias cat="bat"
alias ls="exa"
alias l="ls -al"
alias gs="git status"
alias gst="git status"
alias gsw="git switch"
alias gd="git diff"
alias gds="gd --staged"

function git-hub-clone() {
  TO_CLONE=""
  if [ $# -eq 1 ]; then
    TO_CLONE="$1"
  else
    TO_CLONE="$1/$2"
  fi

  git clone git@github.com:$TO_CLONE.git $HOME/projects/$TO_CLONE;
}

alias vi="nvim"
alias cz="chezmoi"
[ -f ~/projects/ferocia/up/.zsh-up-completion/init.zsh ] && source ~/projects/ferocia/up/.zsh-up-completion/init.zsh

bindkey "^P" history-beginning-search-backward
bindkey "^N" history-beginning-search-forward

source "$HOME/.config/zsh/fzf.zsh"

. ~/.asdf/plugins/java/set-java-home.zsh

fpath+=("$(brew --prefix)/share/zsh/site-functions")

# test -e "${HOME}/.iterm2_shell_integration.zsh" && source "${HOME}/.iterm2_shell_integration.zsh"

. $(brew --prefix asdf)/libexec/asdf.sh

path+=("$(yarn global bin)")

. "$HOME/.cargo/env"

# path=("$(beers --prefix)/bin" $path)

# autoload -U add-zsh-hook
# __loaded_completions=0
# __jn-completion-setup() {
#   # this needs to run in the context of the root of the project, to ensure we
#   # are using the correct version of node, etc, to run the tools.
#   if [[ $PWD = /Users/david/projects/ferocia/johanna-native* ]]; then
#     if [[ __loaded_completions -ne 1 ]]; then
#       eval "$(/Users/david/projects/ferocia/johanna-native/jn completion)"
#       __loaded_completions=1
#     fi
#   fi
# }
# add-zsh-hook chpwd __jn-completion-setup

if [ -f "/Users/david/projects/ferocia/johanna-native/cli/scripts/completions.zsh" ]; then
  source "/Users/david/projects/ferocia/johanna-native/cli/scripts/completions.zsh"
fi
